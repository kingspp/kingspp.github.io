<!DOCTYPE html>
<html>

  <head>
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1">

  <title>Toying around with CasperJS :D</title>
  <meta name="description" content="I have always faced the bandwidth issues during last week of the month - Similar to month-end salary issues :D. Once you go 10+Mbps, you can never use anythi...">

  <link rel="stylesheet" href="/css/main.css">
  <link rel="canonical" href="http://localhost:4000/tricks/2017/11/04/toying-around-with-casperJS.html">
  <link rel="alternate" type="application/rss+xml" title="Kalpane" href="http://localhost:4000/feed.xml" />

  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css">
  <link href='https://fonts.googleapis.com/css?family=Lato' rel='stylesheet' type='text/css'>
  <link href='https://fonts.googleapis.com/css?family=Quicksand' rel='stylesheet' type='text/css'>
</head>


  <body>

    <div class="site-header">

    <nav class="site-nav">
      <a href="#" class="menu-icon">
        <i class="fa fa-navicon fa-lg"></i>
      </a>

      <div class="trigger">
        
          <a class="page-link" target="_top"
             href="http://localhost:4000/">Home</a>
        
          <a class="page-link" target="_top"
             href="http://localhost:4000/about">About</a>
        
          <a class="page-link" target="_top"
             href="http://localhost:4000/archive">Archive</a>
        
          <a class="page-link" target="_blank"
             href="http://github.com/kingspp">GitHub</a>
        
      </div>
    </nav>

</div>


    <div class="page-content">
      <div class="wrapper">
        <div class="post">

  <header class="post-header">
     <h1 class="post-title">Toying around with CasperJS :D</h1>
     <p class="post-meta">
         <i class="fa fa-calendar-o"></i> Nov 4, 2017
          â€¢ <i class="fa fa-user"></i> kingspp
         </p>
         <p>Solution for NBS (neighbour-bandwidth-suc^er) problem</p>
  </header>

    <div class="post-paging">
  
  
    <div class="right">
      <a href="/design/2017/11/05/singleton's-skeleton.html">
        <i class="fa fa-angle-right fa-2x"></i>
      </a>
    </div>
  
</div>

  


  <article class="post-content">
    <p>I have always faced the bandwidth issues during last week of the month - Similar to month-end salary issues :D. Once you go 10+Mbps, you can never use anything that has <code class="highlighter-rouge">kilo</code> in it, it always has to be <strong>MEGA</strong>!!. I hate pixels, only when it comes to streaming a video online - big ass televisions are even worse. Sshhh, Enough of whining, lets dive down to the answer -</p>

<h4 id="step-1-install-casperjs">Step 1: <a href="http://docs.casperjs.org/en/latest/installation.html">Install CasperJS</a></h4>

<h4 id="step-2-tiny-piece-of-code">Step 2: Tiny piece of Code</h4>
<div class="language-javascript highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="c1">// Create a casper object and define its characteristics - Basics, copy without regrets.. </span>
<span class="kd">var</span> <span class="nx">casper</span> <span class="o">=</span> <span class="nx">require</span><span class="p">(</span><span class="s1">'casper'</span><span class="p">).</span><span class="nx">create</span><span class="p">({</span>
    <span class="na">verbose</span><span class="p">:</span> <span class="kc">true</span><span class="p">,</span>
    <span class="na">logLevel</span><span class="p">:</span> <span class="s1">'debug'</span><span class="p">,</span>
    <span class="na">pageSettings</span><span class="p">:</span> <span class="p">{</span>
         <span class="na">loadImages</span><span class="p">:</span>  <span class="kc">false</span><span class="p">,</span>         <span class="c1">// The WebPage instance used by Casper will</span>
         <span class="na">loadPlugins</span><span class="p">:</span> <span class="kc">false</span><span class="p">,</span>         <span class="c1">// use these settings</span>
         <span class="na">userAgent</span><span class="p">:</span> <span class="s1">'Mozilla/5.0 (Macintosh; Intel Mac OS X 10_7_5) AppleWebKit/537.4 (KHTML, like Gecko) Chrome/22.0.1229.94 Safari/537.4'</span>
    <span class="p">}</span>
<span class="p">});</span>

<span class="c1">// Define the router IP - Do not copy!! It will not work!! :P</span>
<span class="nx">casper</span><span class="p">.</span><span class="nx">start</span><span class="p">(</span><span class="s1">'http://192.168.0.1'</span><span class="p">);</span>

<span class="c1">// Everybody has their username and password - Just fill up the quotes - Check form name for your router [Hint - Use Inspect Element] </span>
<span class="nx">casper</span><span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">echo</span><span class="p">(</span><span class="s1">'First Page: '</span> <span class="o">+</span> <span class="k">this</span><span class="p">.</span><span class="nx">getTitle</span><span class="p">());</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">fill</span><span class="p">(</span><span class="s1">'form[name="test"]'</span><span class="p">,</span> <span class="p">{</span>
        <span class="na">username</span><span class="p">:</span> <span class="s1">''</span><span class="p">,</span>
        <span class="na">password</span><span class="p">:</span>  <span class="s1">''</span>
    <span class="p">},</span> <span class="kc">true</span><span class="p">);</span>

<span class="p">});</span>

<span class="c1">// At this stage you are prety much done and might have logged into your router settings - </span>
<span class="nx">This</span> <span class="nx">part</span> <span class="nx">needs</span> <span class="nx">major</span> <span class="nx">refactoring</span><span class="p">,</span> <span class="nx">depending</span> <span class="nx">on</span> <span class="nx">the</span> <span class="nx">type</span> <span class="k">of</span> <span class="nx">the</span> <span class="nx">router</span>
<span class="nx">casper</span><span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">(){</span>
  <span class="k">this</span><span class="p">.</span><span class="nx">open</span><span class="p">(</span><span class="s1">'http://192.168.0.1/ipqostc_gen_ap.htm'</span><span class="p">).</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>

    <span class="k">this</span><span class="p">.</span><span class="nx">then</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span>
        <span class="k">this</span><span class="p">.</span><span class="nx">fill</span><span class="p">(</span><span class="s1">'form[name="qostc"]'</span><span class="p">,</span> <span class="p">{</span>
            <span class="na">downtotal</span><span class="p">:</span> <span class="s1">''</span><span class="o">+</span><span class="nx">casper</span><span class="p">.</span><span class="nx">cli</span><span class="p">.</span><span class="kd">get</span><span class="p">(</span><span class="mi">0</span><span class="p">)</span><span class="o">+</span><span class="s1">''</span>
        <span class="p">},</span> <span class="kc">false</span><span class="p">);</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">echo</span><span class="p">(</span><span class="k">this</span><span class="p">.</span><span class="nx">getFormValues</span><span class="p">(</span><span class="s1">'form[name="qostc"]'</span><span class="p">).</span><span class="nx">downtotal</span><span class="p">);</span>
    <span class="k">this</span><span class="p">.</span><span class="nx">evaluate</span><span class="p">(</span><span class="kd">function</span><span class="p">()</span> <span class="p">{</span><span class="nb">document</span><span class="p">.</span><span class="nx">querySelector</span><span class="p">(</span><span class="s1">'input[type="submit"][name="applyItflimit"]'</span><span class="p">).</span><span class="nx">click</span><span class="p">()});</span>
    <span class="c1">// this.click('input[type="submit"][name="applyItflimit"]');</span>
    <span class="p">});</span>
<span class="p">});</span>
<span class="p">});</span>
<span class="nx">casper</span><span class="p">.</span><span class="nx">run</span><span class="p">();</span>

<span class="c1">// Save this script as router_hack.js</span>
</code></pre></div></div>

<h4 id="step-3-run---casperjs-router_hackjs-128">Step 3: Run - <code class="highlighter-rouge">casperjs router_hack.js 128</code></h4>
<p>The above command sets both upload and download limts to 128kbps</p>

  </article>

    

    
       <div class="block">
  <div id="disqus_thread"></div>
  <script type="text/javascript">
      var disqus_shortname = "https-kingspp-github-io";
      (function() {
        var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
        dsq.src = 'https://' + disqus_shortname + '.disqus.com/embed.js';
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
      })();
  </script>
</div>
    

  <div class="post-up" align="center">
  	<a href="#">
  	<i class="fa fa-angle-up fa-2x"></i>
  	</a>
  </div>

</div>

      </div>
    </div>

  <div class="footer center">

  Built with Jekyll using
  <a href="https://github.com/kuoa/julia" target="_blank">Julia</a>
  theme
  <img src='/assets/logo.png'>

</div>


  </body>
</html>
